{"version":3,"file":"main.js","mappings":";;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,QAAQ,EAAE,SAAS,aAAa,KAAK,OAAO,QAAQ,eAAe,YAAY;AAClG;AACA,iBAAiB,cAAc;AAC/B;AACA;AACA,kDAAkD,gBAAgB;AAClE;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACe;AACf;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,aAAa;AACb;AACA;;;ACvEA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,wBAAwB,EAAE,eAAe;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,iCAAiC;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,gDAAgD;AAC9F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;;ACnQ6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP,oBAAoB,oBAAoB;AACxC;AACA;AACA;AACO;AACP,oBAAoB,kBAAkB;AACtC;AACA;AACA;AACO;AACP,oBAAoB,wBAAwB;AAC5C;AACA;AACA;AACO;AACP,oBAAoB,oBAAoB;AACxC;AACA;;;AC/BqB;AACA;AAC+B;AAMvB;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,yBAAyB,GAAG,0BAA0B;AAC/D;AACA;AACA;AACA;AACA;AACA,IAAI,WAAW;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,aAAa;AACjB,IAAI,sBAAsB;AAC1B;AACA,QAAQ,WAAW;AACnB,QAAQ;AACR,QAAQ,UAAU;AAClB;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,iBAAiB;AACnB,CAAC","sources":["webpack://webpack-template/./src/data-fetcher.js","webpack://webpack-template/./src/content-generator.js","webpack://webpack-template/./src/render-controller.js","webpack://webpack-template/./src/index.js"],"sourcesContent":["const API_KEY = \"6LGV7CTWHZN4M96CEKSX33LL2\";\r\n\r\nfunction fetchData(location, unit = \"metric\") {\r\n  return new Promise((resolve, reject) => {\r\n    const baseUrl =\r\n      \"https://weather.visualcrossing.com/VisualCrossingWebServices/rest/services/timeline/\";\r\n    const contentType = \"json\";\r\n    const url = `${baseUrl}${location}?unitGroup=${unit}&key=${API_KEY}&contentType=${contentType}`;\r\n\r\n    fetch(url, { mode: \"cors\" })\r\n      .then((response) => {\r\n        if (!response.ok) {\r\n          reject(new Error(`HTTP error! status: ${response.status}`));\r\n        }\r\n        const contentType = response.headers.get(\"content-type\");\r\n        if (!contentType || !contentType.includes(\"application/json\")) {\r\n          reject(new Error(\"Not a JSON response\"));\r\n        }\r\n        return response.json();\r\n      })\r\n      .then((data) => resolve(data))\r\n      .catch((error) => reject(error));\r\n  });\r\n}\r\n\r\nfunction cleanData(data) {\r\n  return {\r\n    location: data.resolvedAddress,\r\n    tzoffset: data.tzoffset,\r\n    description: data.description,\r\n    currentConditions: {\r\n      datetime: data.currentConditions.datetime,\r\n      temp: data.currentConditions.temp,\r\n      feelslike: data.currentConditions.feelslike,\r\n      humidity: data.currentConditions.humidity,\r\n      dew: data.currentConditions.dew,\r\n      precip: data.currentConditions.precip,\r\n      precipprob: data.currentConditions.precipprob,\r\n      pressure: data.currentConditions.pressure,\r\n      visibility: data.currentConditions.visibility,\r\n      conditions: data.currentConditions.conditions,\r\n      icon: data.currentConditions.icon,\r\n      sunrise: data.currentConditions.sunrise,\r\n      sunset: data.currentConditions.sunset,\r\n    },\r\n    days: data.days.map((day) => {\r\n      return {\r\n        datetime: day.datetime,\r\n        tempmax: day.tempmax,\r\n        tempmin: day.tempmin,\r\n        precipprob: day.precipprob,\r\n        preciptype: day.preciptype,\r\n        conditions: day.conditions,\r\n        description: day.description,\r\n        icon: day.icon,\r\n      };\r\n    }),\r\n  };\r\n}\r\n\r\nexport default async function getWheatherInformation(\r\n  location,\r\n  unit = \"metric\",\r\n) {\r\n  try {\r\n    const data = await fetchData(location, unit);\r\n    return cleanData(data);\r\n  } catch (error) {\r\n    console.error(\"Error en getWheatherInformation:\", error.message);\r\n    return { error };\r\n  }\r\n}\r\n","function createElement(tag, ...classList) {\r\n  const element = document.createElement(tag);\r\n  classList.forEach((className) => element.classList.add(className));\r\n  return element;\r\n}\r\n\r\nexport function createIconContainer(iconName) {\r\n  const iconContainer = createElement(\"div\", \"icon-container\");\r\n  const icon = createElement(\"div\", \"icon\", iconName);\r\n  iconContainer.appendChild(icon);\r\n  return iconContainer;\r\n}\r\n\r\nfunction createCurrentConditionRow(header, value, ...classList) {\r\n  const tr = createElement(\"tr\");\r\n  const th = createElement(\"th\");\r\n  th.setAttribute(\"scope\", \"row\");\r\n  th.textContent = header;\r\n  tr.appendChild(th);\r\n  const td = createElement(\"td\", ...classList);\r\n  td.textContent = value;\r\n  tr.appendChild(td);\r\n  return tr;\r\n}\r\n\r\nfunction createForecastHeaderRow(title) {\r\n  const row = createElement(\"tr\");\r\n  const header = createElement(\"th\");\r\n  header.setAttribute(\"scope\", \"row\");\r\n  header.textContent = title;\r\n  row.appendChild(header);\r\n  return row;\r\n}\r\n\r\nfunction addForecastTableColumn(table, day) {\r\n  const weekday = [\r\n    \"Sunday\",\r\n    \"Monday\",\r\n    \"Tuesday\",\r\n    \"Wednesday\",\r\n    \"Thursday\",\r\n    \"Friday\",\r\n    \"Saturday\",\r\n  ];\r\n  const date = new Date(day.datetime);\r\n  const rows = table.querySelectorAll(\"tr\");\r\n\r\n  const dateCell = createElement(\"th\");\r\n  dateCell.textContent = `${weekday[date.getDay()]} ${date.getDate()}`;\r\n  rows[0].appendChild(dateCell);\r\n\r\n  const descriptionCell = rows[1].insertCell();\r\n  descriptionCell.textContent = day.description;\r\n\r\n  const tempMaxCell = rows[2].insertCell();\r\n  tempMaxCell.textContent = day.tempmax;\r\n  tempMaxCell.classList.add(\"temperature\");\r\n\r\n  const tempMinCell = rows[3].insertCell();\r\n  tempMinCell.textContent = day.tempmin;\r\n  tempMinCell.classList.add(\"temperature\");\r\n\r\n  const conditionsCell = rows[4].insertCell();\r\n  const conditionsDiv = createElement(\"div\");\r\n  const conditionsIcon = createIconContainer(day.icon);\r\n  conditionsDiv.appendChild(conditionsIcon);\r\n  const conditionsText = document.createTextNode(day.conditions);\r\n  conditionsDiv.appendChild(conditionsText);\r\n  conditionsCell.appendChild(conditionsDiv);\r\n\r\n  const precipitationTypeCell = rows[5].insertCell();\r\n  precipitationTypeCell.textContent = day.preciptype;\r\n\r\n  const precipitationProbabilityCell = rows[6].insertCell();\r\n  precipitationProbabilityCell.textContent = day.precipprob;\r\n  precipitationProbabilityCell.classList.add(\"percentage\");\r\n}\r\n\r\nexport function createWeatherContent(data, unit) {\r\n  const container = createElement(\"div\", \"weather-container\", unit);\r\n  container.classList.add(unit);\r\n\r\n  const locationDiv = createElement(\"div\", \"location\");\r\n  const locationIcon = createIconContainer(\"location-icon\");\r\n  locationDiv.appendChild(locationIcon);\r\n  const selectedLocation = createElement(\"div\", \"selected-location\");\r\n  selectedLocation.textContent = data.location;\r\n  locationDiv.appendChild(selectedLocation);\r\n  container.appendChild(locationDiv);\r\n\r\n  const todayDiv = createElement(\"div\", \"today\");\r\n  const descriptionDiv = createElement(\"div\", \"description\");\r\n  descriptionDiv.textContent = data.description;\r\n  todayDiv.appendChild(descriptionDiv);\r\n\r\n  const currentConditionsDiv = createElement(\"div\", \"current-conditions\");\r\n  const currentDescriptionsDiv = createElement(\"div\", \"current-descriptions\");\r\n  const generalDescriptionDiv = createElement(\"div\", \"general-description\");\r\n  const currentConditionIcon = createIconContainer(data.currentConditions.icon);\r\n  generalDescriptionDiv.appendChild(currentConditionIcon);\r\n\r\n  const temperaturesDiv = createElement(\"div\", \"temperatures\");\r\n  const temperatureDiv = createElement(\"div\", \"temperature\");\r\n  temperatureDiv.textContent = data.currentConditions.temp;\r\n  temperaturesDiv.appendChild(temperatureDiv);\r\n\r\n  const feelsLikeDiv = createElement(\"div\", \"feels-like\", \"temperature\");\r\n  feelsLikeDiv.textContent = `Feels like: ${data.currentConditions.feelslike}`;\r\n  temperaturesDiv.appendChild(feelsLikeDiv);\r\n  generalDescriptionDiv.appendChild(temperaturesDiv);\r\n\r\n  currentDescriptionsDiv.appendChild(generalDescriptionDiv);\r\n\r\n  const conditionsDiv = createElement(\"div\", \"conditions\");\r\n  conditionsDiv.textContent = data.currentConditions.conditions;\r\n  currentDescriptionsDiv.appendChild(conditionsDiv);\r\n\r\n  const lastUpdateDiv = createElement(\"div\", \"last-update\");\r\n  lastUpdateDiv.textContent = `Last update: ${data.currentConditions.datetime.substring(0, 5)}`;\r\n  currentDescriptionsDiv.appendChild(lastUpdateDiv);\r\n\r\n  currentConditionsDiv.appendChild(currentDescriptionsDiv);\r\n\r\n  const currentConditionsTableDiv = createElement(\r\n    \"div\",\r\n    \"current-conditions-table\",\r\n  );\r\n  const currentConditionsTable = createElement(\"table\");\r\n  const currentConditionsTableBody = createElement(\"tbody\");\r\n\r\n  const tr1 = createCurrentConditionRow(\r\n    \"Humidity\",\r\n    data.currentConditions.humidity,\r\n    \"percentage\",\r\n  );\r\n  currentConditionsTableBody.appendChild(tr1);\r\n\r\n  const tr2 = createCurrentConditionRow(\r\n    \"Dew Point\",\r\n    data.currentConditions.dew,\r\n    \"temperature\",\r\n  );\r\n  currentConditionsTableBody.appendChild(tr2);\r\n\r\n  const tr3 = createCurrentConditionRow(\r\n    \"Pressure\",\r\n    data.currentConditions.pressure,\r\n  );\r\n  currentConditionsTableBody.appendChild(tr3);\r\n\r\n  const tr4 = createCurrentConditionRow(\r\n    \"Visibility\",\r\n    data.currentConditions.visibility,\r\n    \"distance\",\r\n  );\r\n  currentConditionsTableBody.appendChild(tr4);\r\n\r\n  currentConditionsTable.appendChild(currentConditionsTableBody);\r\n  currentConditionsTableDiv.appendChild(currentConditionsTable);\r\n  currentConditionsDiv.appendChild(currentConditionsTableDiv);\r\n\r\n  const suncycleDiv = createElement(\"div\", \"suncycle\");\r\n  const sunDiv = createElement(\"div\", \"sun\");\r\n  sunDiv.textContent = \"Sun\";\r\n  suncycleDiv.appendChild(sunDiv);\r\n\r\n  const sunriseIconContainer = createIconContainer(\"sunrise\");\r\n  suncycleDiv.appendChild(sunriseIconContainer);\r\n\r\n  const sunriseTimeDiv = createElement(\"div\", \"sun-time\");\r\n  sunriseTimeDiv.textContent = data.currentConditions.sunrise.substring(0, 5);\r\n  suncycleDiv.appendChild(sunriseTimeDiv);\r\n\r\n  const sunsetIconContainer = createIconContainer(\"sunset\");\r\n  suncycleDiv.appendChild(sunsetIconContainer);\r\n\r\n  const sunsetTimeDiv = createElement(\"div\", \"sun-time\");\r\n  sunsetTimeDiv.textContent = data.currentConditions.sunset.substring(0, 5);\r\n  suncycleDiv.appendChild(sunsetTimeDiv);\r\n\r\n  currentConditionsDiv.appendChild(suncycleDiv);\r\n\r\n  todayDiv.appendChild(currentConditionsDiv);\r\n  container.appendChild(todayDiv);\r\n\r\n  const forecastDiv = createElement(\"div\", \"forecast\");\r\n  const forecastHeaderDiv = createElement(\"div\", \"forecast-header\");\r\n  const forecastTitleDiv = createElement(\"div\", \"forecast-title\");\r\n  forecastTitleDiv.textContent = \"Forecast\";\r\n  forecastHeaderDiv.appendChild(forecastTitleDiv);\r\n  forecastDiv.appendChild(forecastHeaderDiv);\r\n\r\n  const forecastContainerDiv = createElement(\"div\", \"forecast-container\");\r\n  const forecastTable = createElement(\"table\");\r\n  const forecastTableBody = createElement(\"tbody\");\r\n\r\n  const emptyRowFirst = createElement(\"tr\");\r\n  const emptyCellFirst = createElement(\"td\", \"empty-cell\");\r\n  emptyCellFirst.setAttribute(\"rowspan\", \"2\");\r\n  emptyRowFirst.appendChild(emptyCellFirst);\r\n  forecastTableBody.appendChild(emptyRowFirst);\r\n\r\n  const empyRowSecond = createElement(\"tr\");\r\n  forecastTableBody.appendChild(empyRowSecond);\r\n\r\n  const forecastTableHeaders = [\r\n    \"Temp Max\",\r\n    \"Temp Min\",\r\n    \"Conditions\",\r\n    \"Precipitation Type\",\r\n    \"Precipitation Prob.\",\r\n  ];\r\n\r\n  forecastTableHeaders.forEach((header) => {\r\n    const headerRow = createForecastHeaderRow(header);\r\n    forecastTableBody.appendChild(headerRow);\r\n  });\r\n\r\n  data.days.forEach((day) => {\r\n    addForecastTableColumn(forecastTableBody, day);\r\n  });\r\n\r\n  forecastTable.appendChild(forecastTableBody);\r\n  forecastContainerDiv.appendChild(forecastTable);\r\n  forecastDiv.appendChild(forecastContainerDiv);\r\n\r\n  container.appendChild(forecastDiv);\r\n\r\n  return container;\r\n}\r\n\r\nexport function createErrorContent(error) {\r\n  const container = createElement(\"div\", \"error\");\r\n\r\n  const iconContainer = createIconContainer(\"error-icon\");\r\n  container.appendChild(iconContainer);\r\n\r\n  const textContainer = document.createTextNode(error);\r\n  container.appendChild(textContainer);\r\n\r\n  return container;\r\n}\r\n\r\nexport function createIndicationsContent() {\r\n  const container = createElement(\"div\", \"indications\");\r\n\r\n  const iconContainer = createIconContainer(\"information-icon\");\r\n  container.appendChild(iconContainer);\r\n\r\n  const textContainer = document.createTextNode(\r\n    \"You can view the weather data from any city you would like by typing it in the search bar. You can also use the current location button to view the weather data from your current location. In case you use the current location button, please allow the browser to access your location.\",\r\n  );\r\n  container.appendChild(textContainer);\r\n\r\n  return container;\r\n}\r\n\r\nexport function createLoadingContent() {\r\n  const container = createElement(\"div\", \"loading\");\r\n  const textNode = document.createTextNode(\"Loading\");\r\n  container.appendChild(textNode);\r\n  const iconContainer = createIconContainer(\"clear-day\");\r\n  container.appendChild(iconContainer);\r\n  return container;\r\n}\r\n","import {\r\n  createWeatherContent,\r\n  createErrorContent,\r\n  createIndicationsContent,\r\n  createLoadingContent,\r\n} from \"./content-generator\";\r\n\r\nfunction cleanBodyAndAppendChild(element) {\r\n  const body = document.querySelector(\".body\");\r\n  body.innerHTML = \"\";\r\n  body.appendChild(element);\r\n}\r\n\r\nexport function renderData(data, unit) {\r\n  const container = createWeatherContent(data, unit);\r\n  cleanBodyAndAppendChild(container);\r\n}\r\n\r\nexport function renderError(error) {\r\n  const container = createErrorContent(error);\r\n  cleanBodyAndAppendChild(container);\r\n}\r\n\r\nexport function renderIndications() {\r\n  const container = createIndicationsContent();\r\n  cleanBodyAndAppendChild(container);\r\n}\r\n\r\nexport function renderLoading() {\r\n  const container = createLoadingContent();\r\n  cleanBodyAndAppendChild(container);\r\n}\r\n","import \"./style.css\";\r\nimport \"./icons.css\";\r\nimport getWheatherInformation from \"./data-fetcher\";\r\nimport {\r\n  renderData,\r\n  renderIndications,\r\n  renderError,\r\n  renderLoading,\r\n} from \"./render-controller\";\r\n\r\n(function main() {\r\n  function validateForm() {\r\n    console.log(\"validating\", new Date());\r\n    locationInput.setCustomValidity(\"\");\r\n    if (locationInput.value === \"\") {\r\n      console.log(\"empty\");\r\n      console.log(locationInput);\r\n      locationInput.setCustomValidity(\"Please enter a location\");\r\n      locationInput.reportValidity();\r\n\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  function useCurrentLocation() {\r\n    navigator.geolocation.getCurrentPosition(\r\n      onLocationSuccess,\r\n      onLocationError,\r\n    );\r\n  }\r\n\r\n  function onLocationSuccess(location) {\r\n    const unitInput = document.getElementById(\"units\");\r\n    showLocationWeather(\r\n      `${location.coords.latitude},${location.coords.longitude}`,\r\n      unitInput.value,\r\n    );\r\n  }\r\n\r\n  function onLocationError(error) {\r\n    renderError(error.message);\r\n  }\r\n\r\n  function submitForm(event) {\r\n    event.preventDefault();\r\n\r\n    console.log(\"submit\");\r\n    if (validateForm()) {\r\n      const locationInput = document.getElementById(\"location\");\r\n      const unitInput = document.getElementById(\"units\");\r\n      showLocationWeather(locationInput.value, unitInput.value);\r\n    }\r\n  }\r\n\r\n  function showLocationWeather(location, unit = \"metric\") {\r\n    renderLoading();\r\n    getWheatherInformation(location, unit).then((data) => {\r\n      if (\"error\" in data) {\r\n        renderError(data.error);\r\n      } else {\r\n        renderData(data, unit);\r\n      }\r\n    });\r\n  }\r\n\r\n  const form = document.querySelector(\"form\");\r\n  const locationInput = document.querySelector(\"#location\");\r\n  const currentLocationButton = document.querySelector(\r\n    \"#current-location-button\",\r\n  );\r\n\r\n  form.addEventListener(\"submit\", submitForm);\r\n  locationInput.addEventListener(\"input\", validateForm);\r\n  currentLocationButton.addEventListener(\"click\", useCurrentLocation);\r\n\r\n  renderIndications();\r\n})();\r\n"],"names":[],"sourceRoot":""}